{% extends 'form_master.html' %}
{% block siteTitle %}Proof Details{% endblock %}
{% block pageSubTitle %}Enter your valid proof details{% endblock %}

{% block form_content %}
      {% load honeypot %}            
                <form id="proof_form" method="post" class="form-horizontal" enctype="multipart/form-data" data-toggle="validator">
                <!-- * Any of the 2 proofs with attachments is mandatory -->
                {% csrf_token %}
                
                  
                    
                <div class="form-group">
                  <label class="col-sm-4 control-label">PAN Card Number<span class="mandatory-field"> *</span></label>
                  <div class="col-sm-3 controls">
                    {{form.pan}}
                    <span class="help-inline">Format:ABCDE1234F</span>
                    <div><id="id_pan_error">{{pan_error}}</div>
                    {{form.pan_attachment}}
                    <div><id="id_pan_att_error">{{pan_att_error}}</div>
                    <div class="help-block with-errors"></div>
                  </div>

                </div>
                <div class="form-group">
                  <label class="col-sm-4 control-label">Aadhar Card Number</label>
                  <div class="col-sm-3 controls">
                    {{form.aadhar_card}}
                    {{form.aadhar_attachment}}
                    <span class="help-inline">Format:123456789012</span>
                    <div class="help-block with-errors"></div>
                  </div>
                </div>
                <div class="form-group">
                  <label class="col-sm-4 control-label">Driving License Number</label>
                  <div class="col-sm-3 controls">
                  {{form.dl}}
                  {{form.dl_attachment}}
                    <div class="help-block with-errors"></div>
                  </div>
                </div>
                <div class="form-group">
                  <label class="col-sm-4 control-label">Passport Number</label>
                  <div class="col-sm-3 controls">
                    {{form.passport}}
                    {{form.passport.errors}}
                    {{form.passport_attachment}}
                    {{form.passport_attachment.errors}}
                    <span class="help-inline">Format:A1234567</span>
                    <div class="help-block with-errors"></div>

                  </div>
                </div>
                <div class="form-group">
                  <label class="col-sm-4 control-label">Voter's ID Number</label>
                  <div class="col-sm-3 controls">
                    {{form.voter_id}}
                    {{form.voter_id.errors}}
                    {{form.voter_attachment}}
                    {{form.voter_attachment.errors}}
                    <span class="help-inline">Format:ABC1234567</span>
                    <div class="help-block with-errors"></div>
                  </div>
                </div>
                {% render_honeypot_field "id_card" %}
                <div class="form-group">

                      <h3 class="col-sm-12 text-right"><input type="submit" id="submit" class="btn vd_bg-green vd_white" value="Save"/></h3>

                </div>
              
              </form>
             
{% endblock %}             

{% block form_scripts %}


<script type="text/javascript">

        
            var data = new FormData($('form').get(0));
            swal({   title: "Checking proof details!!",
              text: "",
              type: "warning",
              showCancelButton: true,
              confirmButtonColor: "#DD6B55",
              confirmButtonText: "OK!",
              cancelButtonText: "Cancel",
              closeOnConfirm: true,
              closeOnCancel: true
              },
              function(isConfirm) {
                if (isConfirm) {
                  $.ajax( {
                    type: "POST",
                    url: '/user_details/proof',
                    data: data,
                    cache: false,
                    processData: false,
                    contentType: false,
                    success: function(data) {
                            var content = $(data).find("#proof_form").html();
                            var error = $(data).find(".errorlist").text();
                            console.log(error)
                            if(error){
                              $("#proof_form").html(content)
                            }else{
                                window.location='/user_details/confirm'
                          }
                        },
                   error: function( data ){
                     var errors = data.response;
                     console.log(errors);
                      }
                  });
            }});    
     }
       }         
   

</script>
<!-- End here -->
{% endblock %}